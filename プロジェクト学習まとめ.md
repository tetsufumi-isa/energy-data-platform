# ğŸ“ ã‚¨ãƒãƒ«ã‚®ãƒ¼äºˆæ¸¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - æŠ€è¡“ç¿’å¾—ãƒ»æˆæœã¾ã¨ã‚

## ğŸŒŸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆæœã‚µãƒãƒªãƒ¼

### **æ§‹ç¯‰ã—ãŸã‚·ã‚¹ãƒ†ãƒ **
- **æ±äº¬é›»åŠ›ãƒ‡ãƒ¼ã‚¿è‡ªå‹•åé›†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: 30ãƒ¶æœˆåˆ†ï¼ˆ21,600ãƒ¬ã‚³ãƒ¼ãƒ‰ï¼‰ã®é›»åŠ›éœ€çµ¦ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨è‡ªå‹•åŒ–
- **Google CloudåŸºç›¤**: GCS + BigQuery ã«ã‚ˆã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã‚¿åŸºç›¤
- **æ°—è±¡ãƒ‡ãƒ¼ã‚¿çµ±åˆ**: é–¢æ±9éƒ½çœŒã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€åŒ…æ‹¬çš„äºˆæ¸¬ç”¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
- **é‹ç”¨è‡ªå‹•åŒ–**: ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ­ã‚°ç›£è¦–

### **æŠ€è¡“çš„ä¾¡å€¤å‰µå‡º**
- **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: 2.5å¹´åˆ†Ã—9éƒ½çœŒã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿çµ±åˆï¼ˆ27ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- **ãƒ‡ãƒ¼ã‚¿å“è³ªä¿è¨¼**: Shift-JISâ†’UTF-8å¤‰æ›ã€å‹å¤‰æ›ã€æ¬ æãƒ‡ãƒ¼ã‚¿å‡¦ç†
- **ã‚³ã‚¹ãƒˆæœ€é©åŒ–**: GCSè‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€BigQuery EXTERNAL TABLEæ´»ç”¨
- **ä¿å®ˆæ€§**: è²¬ä»»åˆ†é›¢è¨­è¨ˆã€åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã€çµ±ä¸€ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ”¥ å®Ÿå‹™ãƒ¬ãƒ™ãƒ«æŠ€è¡“ç¿’å¾—

### **Pythoné«˜åº¦é–‹ç™ºæŠ€è¡“**
- **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘è¨­è¨ˆ**: ã‚¯ãƒ©ã‚¹è¨­è¨ˆã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã€ãƒ¡ã‚½ãƒƒãƒ‰éšå±¤ã«ã‚ˆã‚‹å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **CLI/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¸¡å¯¾å¿œ**: argparseã«ã‚ˆã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»importä¸¡å¯¾å¿œã®æ¥­ç•Œæ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: éšå±¤çš„ä¾‹å¤–å‡¦ç†ã€é©åˆ‡ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ
- **ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ **: éšå±¤ãƒ­ã‚¬ãƒ¼ã€çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã‚ˆã‚‹é‹ç”¨ç›£è¦–å¯¾å¿œ

### **Google Cloud Platformçµ±åˆ**
- **BigQueryè¨­è¨ˆ**: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ»ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãƒ»ã‚¹ã‚­ãƒ¼ãƒæœ€é©åŒ–
- **Cloud Storage**: å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†ã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒãƒªã‚·ãƒ¼
- **EXTERNAL TABLE**: å‹å¤‰æ›ãƒ»ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã®åˆ¶ç´„å›é¿æŠ€è¡“
- **APIçµ±åˆ**: èªè¨¼ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

### **ETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆ**
- **Extract-Transform-Load**: ãƒ‡ãƒ¼ã‚¿å–å¾—â†’å¤‰æ›â†’ä¿å­˜ã®å®Œå…¨è‡ªå‹•åŒ–
- **ã‚¨ãƒ©ãƒ¼è€æ€§**: éƒ¨åˆ†å¤±æ•—æ™‚ã®é©åˆ‡ãªå‡¦ç†ç¶™ç¶š
- **ãƒ‡ãƒ¼ã‚¿å“è³ª**: ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¤‰æ›ã€å‹å¤‰æ›ã€æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- **é‹ç”¨æœ€é©åŒ–**: ãƒ­ã‚°ã€çµ±è¨ˆã€ç›£è¦–æ©Ÿèƒ½ã®çµ±åˆ

### **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å‡¦ç†**
- **30ãƒ¶æœˆåˆ†ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: è‡ªå‹•åé›†ãƒ»å‹å¤‰æ›ãƒ»BigQueryæŠ•å…¥
- **CSVåŠ å·¥è‡ªå‹•åŒ–**: 1æ™‚é–“ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºâ†’æ©Ÿæ¢°å­¦ç¿’ç”¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›
- **æ°—è±¡ãƒ‡ãƒ¼ã‚¿çµ±åˆ**: Open-Meteo APIæ´»ç”¨ã€9éƒ½çœŒåº§æ¨™ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿äº’æ›æ€§**: Historical vs Forecast APIã®çµ±åˆæˆ¦ç•¥

## ğŸ› ï¸ å®Ÿè£…ãƒ»è¨­è¨ˆåŠ›

### **å®Ÿå‹™ãƒ¬ãƒ™ãƒ«è¨­è¨ˆæ€æƒ³**
- **è²¬ä»»åˆ†é›¢**: æ±ç”¨æ©Ÿèƒ½ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®æ˜ç¢ºãªåˆ†é›¢
- **å†åˆ©ç”¨æ€§**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–ã«ã‚ˆã‚‹ä¿å®ˆæ€§å‘ä¸Š
- **UXé‡è¦–**: æŠ€è¡“çš„ã‚¨ãƒ©ãƒ¼ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **é©åˆ‡ãªæŠ½è±¡åŒ–**: éå‰°è¨­è¨ˆã‚’å›é¿ã—ãŸæœ€é©ãªãƒ¬ãƒ™ãƒ«é¸æŠ

### **å“è³ªä¿è¨¼ãƒ»ãƒ†ã‚¹ãƒˆ**
- **åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆè¨­è¨ˆ**: åˆæœŸåŒ–ãƒ»æ©Ÿèƒ½ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å…¨é …ç›®
- **å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ**: å®Ÿéš›ã®æ±é›»ã‚µã‚¤ãƒˆã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»å‡¦ç†ç¢ºèª
- **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹æ¤œè¨¼**: æœªæ¥æ—¥ä»˜ãƒ»ç„¡åŠ¹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç­‰ã®å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: Extractâ†’Transformâ†’Load ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼æ¤œè¨¼

### **é‹ç”¨ãƒ»ä¿å®ˆæ€§**
- **ãƒ­ã‚°çµ±åˆ**: éšå±¤ãƒ­ã‚¬ãƒ¼ã«ã‚ˆã‚‹çµ±ä¸€ãƒ­ã‚°å‡ºåŠ›
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: HTTP404ã€ãƒ•ã‚¡ã‚¤ãƒ«ä¸å­˜åœ¨ç­‰ã®é©åˆ‡ãªä¾‹å¤–å‡¦ç†
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: å…¥åŠ›ãƒã‚§ãƒƒã‚¯ã€æœªæ¥æ—¥ä»˜é˜²æ­¢ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œè¨¼
- **è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆè€ƒæ…®ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†

## ğŸ“ˆ å•é¡Œè§£æ±ºãƒ»æœ€é©åŒ–äº‹ä¾‹

### **æŠ€è¡“çš„èª²é¡Œè§£æ±º**
- **BigQueryãƒ‡ãƒ¼ã‚¿æŠ•å…¥åˆ¶ç´„**: EXTERNAL TABLE + å‹å¤‰æ›ã«ã‚ˆã‚‹å›é¿
- **ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å•é¡Œ**: Shift-JISâ†’UTF-8è‡ªå‹•å¤‰æ›
- **å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: CMD foræ–‡ + æ®µéšçš„æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹
- **APIåˆ¶é™å¯¾å¿œ**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° + é©åˆ‡ãªæœŸé–“æŒ‡å®š

### **é–‹ç™ºåŠ¹ç‡åŒ–**
- **ç’°å¢ƒçµ±ä¸€**: VS Codeçµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ« + venvç’°å¢ƒ
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ**: `python -m` ã«ã‚ˆã‚‹æ­£ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸èªè­˜
- **Gitç®¡ç†æœ€é©åŒ–**: æ©Ÿèƒ½å˜ä½ã‚³ãƒŸãƒƒãƒˆ + é©åˆ‡ãªå±¥æ­´ç®¡ç†
- **æ®µéšçš„é–‹ç™º**: å°ã•ãªæˆåŠŸã®ç©ã¿é‡ã­ã«ã‚ˆã‚‹ç¢ºå®Ÿãªé€²æ­©

## ğŸ¯ ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ãƒ»å®Ÿç”¨æ€§

### **å®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ **
- **å®Ÿãƒ‡ãƒ¼ã‚¿å‡¦ç†**: æ±é›»ã‚µã‚¤ãƒˆã‹ã‚‰30ãƒ¶æœˆåˆ†ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨è‡ªå‹•å–å¾—
- **ã‚¯ãƒ©ã‚¦ãƒ‰çµ±åˆ**: GCS + BigQuery ã«ã‚ˆã‚‹æœ¬æ ¼çš„ãƒ‡ãƒ¼ã‚¿åŸºç›¤
- **äºˆæ¸¬æº–å‚™å®Œäº†**: é›»åŠ›ãƒ‡ãƒ¼ã‚¿ + æ°—è±¡ãƒ‡ãƒ¼ã‚¿ + ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æƒ…å ±ã®çµ±åˆ
- **é‹ç”¨å¯¾å¿œ**: ã‚¨ãƒ©ãƒ¼ç›£è¦–ã€è‡ªå‹•å¾©æ—§ã€ãƒ­ã‚°å‡ºåŠ›

### **ã‚³ã‚¹ãƒˆåŠ¹ç‡ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**
- **ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–**: ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ä¸è¦ã€å¾“é‡èª²é‡‘
- **è‡ªå‹•ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**: ä¸è¦ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•å‰Šé™¤ã«ã‚ˆã‚‹ã‚³ã‚¹ãƒˆæœ€é©åŒ–
- **ã‚¨ãƒ©ãƒ¼è€æ€§**: éƒ¨åˆ†å¤±æ•—æ™‚ã®é©åˆ‡ãªå‡¦ç†ç¶™ç¶š
- **æ‹¡å¼µæ€§**: æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è¿½åŠ ã¸ã®å¯¾å¿œè¨­è¨ˆ

---

## ğŸ“š PythonåŸºç¤æŠ€è¡“ï¼ˆå‚è€ƒï¼‰

### **ã‚¯ãƒ©ã‚¹ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘**
```python
uploader = GCSUploader("bucket-name")  # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–
uploader.upload_file(file_path)        # ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—
```
**è¨­è¨ˆæ€æƒ³**: 1ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¤‡æ•°ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤å†åˆ©ç”¨å¯èƒ½è¨­è¨ˆ

### **å¼•æ•°ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**
```python
def __init__(self, base_dir="data/raw"):  # selfã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
```
**ã‚¯ãƒ©ã‚¹å†…ãƒ¡ã‚½ãƒƒãƒ‰**: å¿…ãšæœ€åˆã¯ `self`ã€**é–¢æ•°**: `self` ä¸è¦

### **argparseï¼ˆCLIå¯¾å¿œï¼‰**
```python
parser = ArgumentParser()     # ãƒ‘ãƒ¼ã‚µãƒ¼ä½œæˆ
parser.add_argument('--days') # å¼•æ•°å®šç¾©
args = parser.parse_args()    # Namespaceå–å¾—
```
**ç”¨é€”**: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»importä¸¡å¯¾å¿œã‚·ã‚¹ãƒ†ãƒ 

### **Pathã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ**
```python
from pathlib import Path
path = Path("data") / "raw" / "202505"  # ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
path.mkdir(parents=True, exist_ok=True) # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
```

### **ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ **
```python
logger = getLogger('energy_env.module')  # éšå±¤ãƒ­ã‚¬ãƒ¼å–å¾—
logger.info("å‡¦ç†é–‹å§‹")                  # çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡ºåŠ›
```

### **å®Ÿè¡Œãƒ‘ã‚¿ãƒ¼ãƒ³**
```python
if __name__ == "__main__":  # ç›´æ¥å®Ÿè¡Œæ™‚ã®ã¿True
    main()                  # argparseãŒå‹•ä½œ
```
**è¨­è¨ˆ**: ç›´æ¥å®Ÿè¡Œï¼ˆCLIï¼‰ãƒ»importï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ä¸¡å¯¾å¿œ

### **HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
```python
response = requests.get(url)    # HTTP GET
response.raise_for_status()     # ã‚¨ãƒ©ãƒ¼æ™‚ä¾‹å¤–ç™ºç”Ÿ
```

### **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ**
```python
def validate_date(self, date_str):
    date = datetime.strptime(date_str, '%Y%m%d')  # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
    if date.date() > datetime.today().date():    # ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
        raise ValueError("æœªæ¥ã®æ—¥ä»˜ã¯æŒ‡å®šã§ãã¾ã›ã‚“")
```

### **æ–‡å­—åˆ—ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†**
```python
os.path.basename("/path/file.csv")  # â†’ "file.csv"
text.strip()                        # å‰å¾Œç©ºç™½å‰Šé™¤
"04".zfill(2)                       # ã‚¼ãƒ­åŸ‹ã‚ â†’ "04"
```

### **è¾æ›¸ãƒ»ãƒªã‚¹ãƒˆæ“ä½œ**
```python
results = {'success': [], 'failed': []}
results['success'].append('202505')  # ãƒªã‚¹ãƒˆã«è¿½åŠ 
sorted(months)                       # setâ†’ãƒªã‚¹ãƒˆå¤‰æ›ãƒ»ã‚½ãƒ¼ãƒˆ
```

### **ãƒ«ãƒ¼ãƒ—åˆ¶å¾¡**
```python
for item in items:
    if condition:
        continue  # ä»Šå›ã‚¹ã‚­ãƒƒãƒ—ã€ãƒ«ãƒ¼ãƒ—ç¶™ç¶š
    process(item)
```

### **ä¾‹å¤–å‡¦ç†**
```python
try:
    risky_operation()
except SpecificError as e:  # ç‰¹å®šä¾‹å¤–
    handle_specific(e)
except Exception as e:      # æ±ç”¨ä¾‹å¤–
    handle_general(e)
```

### **ç’°å¢ƒãƒ»Gitç®¡ç†**
- **VS Codeçµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«**: `python -m module` ã«ã‚ˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œ
- **ç’°å¢ƒå¤‰æ•°**: `GOOGLE_APPLICATION_CREDENTIALS` ã®é©åˆ‡ãªè¨­å®š
- **Gitç®¡ç†**: æ©Ÿèƒ½å˜ä½ã‚³ãƒŸãƒƒãƒˆã€.gitignoreã«ã‚ˆã‚‹é™¤å¤–è¨­å®š