# ğŸš€ Phase 10: æ—¥æ¬¡è‡ªå‹•äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ãƒ»é€²æ—å ±å‘Š

## ğŸ“Š Phase 10åŸºæœ¬æƒ…å ±

**å®Ÿè£…æœŸé–“**: 2025å¹´8æœˆï¼ˆPhase 10é–‹å§‹ï¼‰  
**ç›®æ¨™**: æ¯æ—¥è‡ªå‹•ã§é›»åŠ›äºˆæ¸¬ã‚’å®Ÿè¡Œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰  
**å®Ÿè£…ç’°å¢ƒ**: ãƒ­ãƒ¼ã‚«ãƒ«PCï¼ˆWindows + VS Code + venv + ç’°å¢ƒå¤‰æ•°ï¼‰  
**æˆæœæ´»ç”¨**: Phase 1-9ã®å…¨å®Ÿè£…è³‡ç”£ã‚’æœ€å¤§é™æ´»ç”¨  

---

## ğŸ¯ Phase 10å®Ÿè£…è©³ç´°ãƒ—ãƒ­ã‚»ã‚¹

### **10-1: æ—¢å­˜å®Ÿè£…ç†è§£ãƒ»åˆ†æå®Œäº†**

#### **æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ æŠŠæ¡**
```
energy-env/
â”œâ”€â”€ src/data_processing/
â”‚   â”œâ”€â”€ data_downloader.py          # Phase 1: PowerDataDownloader
â”‚   â”œâ”€â”€ weather_processor.py        # Phase 3: WeatherProcessor  
â”‚   â”œâ”€â”€ gcs_uploader.py             # Phase 2: GCSUploader
â”‚   â””â”€â”€ weather_bigquery_loader.py  # Phase 4: WeatherBigQuery
â”œâ”€â”€ src/pipelines/
â”‚   â””â”€â”€ main_etl.py                 # Phase 2: çµ±åˆETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â””â”€â”€ data/
    â”œâ”€â”€ raw/                        # é›»åŠ›ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆ
    â””â”€â”€ weather/                    # æ°—è±¡ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆ
```

#### **PowerDataDownloaderæ©Ÿèƒ½è§£æ**
```python
class PowerDataDownloader:
    BASE_URL = "https://www.tepco.co.jp/forecast/html/images"
    
    # ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
    def download_month_data(self, yyyymm):        # æœˆå˜ä½ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»è§£å‡
    def download_for_days(self, days=5):          # æŒ‡å®šæ—¥æ•°åˆ†ã®æœˆå–å¾—
    def download_for_month(self, yyyymm):         # ç‰¹å®šæœˆå–å¾—
    def download_for_date(self, date_str):        # ç‰¹å®šæ—¥ã®æœˆå–å¾—
```

#### **é‡è¦ãªåˆ¶ç´„ç†è§£**
- **æ±äº¬é›»åŠ›APIåˆ¶ç´„**: æœˆå˜ä½ï¼ˆyyyymm_power_usage.zipï¼‰ã§ã®ã¿æä¾›
- **æ—¥æ¬¡å®Ÿè¡Œæˆ¦ç•¥**: æ˜¨æ—¥ã®æœˆ + å‰æœˆã®2ãƒ¶æœˆå–å¾—ã§å†—é•·æ€§ç¢ºä¿
- **ç’°å¢ƒå¤‰æ•°å¯¾å¿œ**: ENERGY_ENV_PATH ã§Windows/Linuxçµ±ä¸€

### **10-2: MainETLPipelineçµ±åˆè¨­è¨ˆç†è§£**

#### **æ—¢å­˜çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹é€ **
```python
class MainETLPipeline:
    def __init__(self, base_dir=None, bucket_name="energy-env-data"):
        # å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆ
        self.downloader = PowerDataDownloader(base_dir)  # Phase 1
        self.uploader = GCSUploader(bucket_name)         # Phase 2
    
    # Extract + Loadçµ±åˆå®Ÿè¡Œ
    def run_etl_for_month(self, yyyymm):    # ç‰¹å®šæœˆETL
    def run_etl_for_days(self, days=5):     # è¤‡æ•°æœˆETL
    def run_etl_for_date(self, date_str):   # ç‰¹å®šæ—¥ETL
```

#### **å®Ÿè¡Œãƒ•ãƒ­ãƒ¼è©³ç´°**
```bash
# çµ±åˆå®Ÿè¡Œï¼ˆExtract + Loadï¼‰
python -m src.pipelines.main_etl --month 202508
â†“
1. PowerDataDownloader: æ±äº¬é›»åŠ›APIã‹ã‚‰202508.zipãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»è§£å‡
2. GCSUploader: data/raw/202508/*.csv ã‚’GCSã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. æˆåŠŸãƒ»å¤±æ•—çµæœã‚’ãƒ­ã‚°å‡ºåŠ›ãƒ»æ§‹é€ åŒ–ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```

#### **Phase 10ã§ã®æ´»ç”¨ä¾¡å€¤**
- **æ—¢å­˜è³‡ç”£æœ€å¤§æ´»ç”¨**: PowerDataDownloader + GCSUploaderçµ±åˆæ¸ˆã¿
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: 404ã‚¨ãƒ©ãƒ¼ãƒ»APIåˆ¶é™å¯¾å¿œæ¸ˆã¿
- **ç’°å¢ƒå¤‰æ•°å¯¾å¿œ**: ENERGY_ENV_PATHå¯¾å¿œæ¸ˆã¿ï¼ˆPhase 10ã§ä¿®æ­£ï¼‰

### **10-3: ç’°å¢ƒå¤‰æ•°å¯¾å¿œå®Ÿè£…å®Œäº†**

#### **ç’°å¢ƒå¤‰æ•°è¨­å®šãƒ»ç¢ºèª**
```bash
# Windowsç’°å¢ƒå¤‰æ•°è¨­å®š
setx ENERGY_ENV_PATH "C:\Users\tetsu\dev\energy-env"

# è¨­å®šç¢ºèª
echo %ENERGY_ENV_PATH%
```

#### **data_downloader.pyç’°å¢ƒå¤‰æ•°å¯¾å¿œ**
```python
def __init__(self, base_dir=None):
    if base_dir is None:
        energy_env_path = os.getenv('ENERGY_ENV_PATH')
        if energy_env_path is None:
            raise ValueError("ENERGY_ENV_PATH environment variable is not set")
        base_dir = os.path.join(energy_env_path, 'data', 'raw')
    
    self.base_dir = Path(base_dir)
    logger.info(f"PowerDataDownloader initialized with base_dir: {self.base_dir}")
```

#### **main_etl.pyç’°å¢ƒå¤‰æ•°å¯¾å¿œ**
```python
def __init__(self, base_dir=None, bucket_name="energy-env-data"):
    if base_dir is None:
        energy_env_path = os.getenv('ENERGY_ENV_PATH')
        if energy_env_path is None:
            raise ValueError("ENERGY_ENV_PATH environment variable is not set")
        base_dir = os.path.join(energy_env_path, 'data', 'raw')
    
    self.base_dir = Path(base_dir)
    self.bucket_name = bucket_name
```

#### **ç’°å¢ƒå¯¾å¿œåŠ¹æœ**
- âœ… **Windows/Linuxçµ±ä¸€**: ç’°å¢ƒå¤‰æ•°ã§ãƒ‘ã‚¹å•é¡Œè§£æ±º
- âœ… **æœ¬ç•ªç’°å¢ƒæº–å‚™**: Linuxæœ¬ç•ªç’°å¢ƒã¸ã®ç§»æ¤æº–å‚™å®Œäº†
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: ç’°å¢ƒå¤‰æ•°æœªè¨­å®šæ™‚ã®é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- âœ… **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ä¿è­·**: ä¸‹ä½äº’æ›æ€§ç¶­æŒãƒ»æ®µéšçš„ç§»è¡Œå¯èƒ½

### **10-4: WeatherProcessoræ´»ç”¨æˆ¦ç•¥è¨­è¨ˆ**

#### **WeatherProcessoræ—¢å­˜æ©Ÿèƒ½ç†è§£**
```python
class WeatherProcessor:
    VALID_PREFECTURES = [
        'tokyo', 'kanagawa', 'saitama', 'chiba', 'ibaraki', 
        'tochigi', 'gunma', 'yamanashi', 'shizuoka'
    ]
    
    def convert_json_to_csv(self, json_file_path, date_filter=None):
        # JSONâ†’CSVå¤‰æ›ãƒ»æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½
    
    def process_directory(self, input_dir, date_filter=None):
        # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€æ‹¬å‡¦ç†
    
    def upload_to_gcs(self, csv_files, gcs_prefix):
        # GCSã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰çµ±åˆ
```

#### **Phase 10æ´»ç”¨æ–¹é‡**
```python
# åƒè‘‰çœŒãƒ»æ˜¨æ—¥åˆ†ãƒ‡ãƒ¼ã‚¿å–å¾—æˆ¦ç•¥
yesterday = datetime.now() - timedelta(days=1)
date_filter = yesterday.strftime('%Y-%m-%d')  # "2025-08-05"

# æ—¢å­˜WeatherProcessorã‚’åƒè‘‰çœŒãƒ»æ˜¨æ—¥åˆ†ãƒ•ã‚£ãƒ«ã‚¿ã§æ´»ç”¨
processor = WeatherProcessor()
results = processor.process_directory(
    input_dir="data/weather/raw/historical", 
    date_filter=date_filter  # æ˜¨æ—¥åˆ†ã®ã¿æŠ½å‡º
)
```

#### **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼çµ±åˆè¨­è¨ˆ**
- **Phase 3-4è³‡ç”£æ´»ç”¨**: JSONâ†’CSVå¤‰æ›ãƒ»GCSã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½æµç”¨
- **åƒè‘‰çœŒç‰¹åŒ–**: Phase 9ã§ç¢ºå®šã—ãŸæœ€é‡è¦åœ°ç‚¹ã«é›†ç´„
- **æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿**: æ—¢å­˜date_filteræ©Ÿèƒ½ã§æ˜¨æ—¥åˆ†ã®ã¿åŠ¹ç‡å–å¾—

---

## ğŸ”¬ Phase 10æŠ€è¡“çš„ç™ºè¦‹ãƒ»è¨­è¨ˆåˆ¤æ–­

### **æ—¢å­˜å®Ÿè£…ã®è¨­è¨ˆæ€æƒ³ç†è§£**

#### **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç–çµåˆè¨­è¨ˆ**
- **PowerDataDownloader**: é›»åŠ›ãƒ‡ãƒ¼ã‚¿å–å¾—å°‚é–€ãƒ»ç‹¬ç«‹å‹•ä½œå¯èƒ½
- **WeatherProcessor**: æ°—è±¡ãƒ‡ãƒ¼ã‚¿å‡¦ç†å°‚é–€ãƒ»ç‹¬ç«‹å‹•ä½œå¯èƒ½
- **MainETLPipeline**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **GCSUploader**: ã‚¯ãƒ©ã‚¦ãƒ‰çµ±åˆãƒ»å†åˆ©ç”¨å¯èƒ½

#### **çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆã®å„ªç§€æ€§**
```python
# çµ±åˆè¨­è¨ˆã®ä¾¡å€¤ï¼ˆPhase 2ã§ç¢ºç«‹ï¼‰
class MainETLPipeline:
    def __init__(self):
        # å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆãƒ»ä¾å­˜é–¢ä¿‚ç®¡ç†
        self.downloader = PowerDataDownloader()  # Extract
        self.uploader = GCSUploader()            # Load
    
    def run_etl_for_month(self, yyyymm):
        # Extract + Loadçµ±åˆãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»çµæœæ§‹é€ åŒ–
        download_results = self.downloader.download_for_month(yyyymm)
        upload_results = self._upload_downloaded_data(download_results['success'])
        return {'download_results': ..., 'upload_results': ...}
```

#### **ç’°å¢ƒå¤‰æ•°å¯¾å¿œã®æˆ¦ç•¥çš„ä¾¡å€¤**
- **é–‹ç™ºãƒ»æœ¬ç•ªåˆ†é›¢**: Windowsé–‹ç™ºãƒ»Linuxæœ¬ç•ªã®çµ±ä¸€
- **ãƒãƒ¼ãƒ é–‹ç™ºå¯¾å¿œ**: å„é–‹ç™ºè€…ã®ç’°å¢ƒå·®ç•°å¸å
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Š**: ãƒ‘ã‚¹æƒ…å ±ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å›é¿
- **é‹ç”¨æ€§å‘ä¸Š**: ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®è¨­å®šå¤‰æ›´ç°¡ç´ åŒ–

### **Phase 10å®Ÿè£…æˆ¦ç•¥ã®æœ€é©åŒ–**

#### **æ—¢å­˜è³‡ç”£æœ€å¤§æ´»ç”¨æˆ¦ç•¥**
```python
# Phase 10æ–°è¦å®Ÿè£…æ–¹é‡ï¼ˆæœ€å°é™é–‹ç™ºï¼‰
class DailyPredictionPipeline:
    def __init__(self):
        # æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆï¼ˆæ–°è¦é–‹ç™ºæœ€å°åŒ–ï¼‰
        self.etl_pipeline = MainETLPipeline()         # Phase 1-2æ´»ç”¨
        self.weather_processor = WeatherProcessor()   # Phase 3-4æ´»ç”¨
        # Phase 5-6ç‰¹å¾´é‡ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯çµ±åˆ
        # Phase 9 XGBoostãƒ¢ãƒ‡ãƒ«çµ±åˆ
    
    def run_daily_prediction(self):
        # æ—¥æ¬¡å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ï¼ˆæ—¢å­˜æ©Ÿèƒ½çµ„ã¿åˆã‚ã›ï¼‰
        # 1. æ˜¨æ—¥+å‰æœˆãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆMainETLPipelineæ´»ç”¨ï¼‰
        # 2. åƒè‘‰çœŒæ°—è±¡ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆWeatherProcessoræ´»ç”¨ï¼‰  
        # 3. ç‰¹å¾´é‡ç”Ÿæˆï¼ˆPhase 5-6ãƒ­ã‚¸ãƒƒã‚¯æ´»ç”¨ï¼‰
        # 4. äºˆæ¸¬å®Ÿè¡Œï¼ˆPhase 9ãƒ¢ãƒ‡ãƒ«æ´»ç”¨ï¼‰
        # 5. çµæœä¿å­˜ï¼ˆGCSUploaderæ´»ç”¨ï¼‰
```

#### **2ãƒ¶æœˆå–å¾—æˆ¦ç•¥ã®åˆç†æ€§**
```python
# æ˜¨æ—¥ã®æœˆ + å‰æœˆå–å¾—æˆ¦ç•¥
today = datetime.now()
yesterday = today - timedelta(days=1)

# æ˜¨æ—¥ã®æœˆ
current_month = yesterday.strftime('%Y%m')  # "202508"

# å‰æœˆè¨ˆç®—ï¼ˆæœˆè·¨ãå¯¾å¿œï¼‰
if yesterday.month == 1:
    prev_month = f"{yesterday.year - 1}12"  # 1æœˆãªã‚‰å‰å¹´12æœˆ
else:
    prev_month = f"{yesterday.year}{yesterday.month - 1:02d}"  # "202507"

# æ—¢å­˜MainETLPipelineã§2å›å®Ÿè¡Œ
subprocess.run(["python", "-m", "src.pipelines.main_etl", "--month", current_month])
subprocess.run(["python", "-m", "src.pipelines.main_etl", "--month", prev_month])
```

#### **è¨­è¨ˆåˆ¤æ–­ã®æ ¹æ‹ **
- **æœˆè·¨ãå¯¾å¿œ**: 8/1å®Ÿè¡Œæ™‚ã«7æœˆãƒ‡ãƒ¼ã‚¿ã‚‚å¿…è¦
- **éšœå®³è€æ€§**: ç‰‡æ–¹å¤±æ•—ã§ã‚‚äºˆæ¸¬å®Ÿè¡Œå¯èƒ½
- **ç‰¹å¾´é‡è¦æ±‚**: lag_1_business_dayè¨ˆç®—ã«éå»ãƒ‡ãƒ¼ã‚¿å¿…è¦
- **åŠ¹ç‡æ€§**: å¿…è¦æœ€å°é™ã®2ãƒ¶æœˆã®ã¿ãƒ»ç„¡é§„ãªå–å¾—å›é¿

---

## ğŸ¯ Phase 10æˆæœãƒ»ä¾¡å€¤ï¼ˆæº–å‚™æ®µéšï¼‰

### **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæˆæœ**
- âœ… **æ—¢å­˜è³‡ç”£ç†è§£**: Phase 1-9ã®å®Ÿè£…æ§‹é€ ãƒ»è¨­è¨ˆæ€æƒ³å®Œå…¨æŠŠæ¡
- âœ… **çµ±åˆè¨­è¨ˆ**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç–çµåˆãƒ»å†åˆ©ç”¨å¯èƒ½æ€§ç¢ºèª
- âœ… **ç’°å¢ƒå¯¾å¿œ**: Windows/Linuxçµ±ä¸€ãƒ»æœ¬ç•ªç§»æ¤æº–å‚™å®Œäº†
- âœ… **å®Ÿè£…æˆ¦ç•¥**: æ–°è¦é–‹ç™ºæœ€å°åŒ–ãƒ»æ—¢å­˜æ´»ç”¨æœ€å¤§åŒ–æ–¹é‡ç¢ºå®š

### **æŠ€è¡“çš„ç†è§£æ·±åŒ–**
- âœ… **ETLãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**: MainETLPipelineã®çµ±åˆä¾¡å€¤ãƒ»è¨­è¨ˆå„ªç§€æ€§ç†è§£
- âœ… **APIåˆ¶ç´„ç†è§£**: æ±äº¬é›»åŠ›æœˆå˜ä½åˆ¶ç´„ãƒ»WeatherProcessoræ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿æ´»ç”¨
- âœ… **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ—¢å­˜ã®404ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ãƒ‡ãƒ¼ã‚¿ç•°å¸¸å¯¾å¿œç¢ºèª
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: Extractâ†’Loadâ†’Transformâ†’Predictâ†’Storeã®å…¨ä½“è¨­è¨ˆ

### **å®Ÿè£…æº–å‚™å®Œäº†åº¦**
- âœ… **ç’°å¢ƒå¤‰æ•°è¨­å®š**: ENERGY_ENV_PATHè¨­å®šãƒ»ã‚³ãƒ¼ãƒ‰ä¿®æ­£å®Œäº†
- âœ… **å®Ÿè¡Œç¢ºèªæº–å‚™**: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å˜ä½“ãƒ»çµ±åˆå®Ÿè¡Œæ–¹æ³•ç†è§£
- âœ… **çµ±åˆæ–¹é‡ç¢ºå®š**: DailyPredictionPipelineè¨­è¨ˆãƒ»å®Ÿè£…æ–¹é‡æ±ºå®š
- âœ… **Phase 9é€£æº**: XGBoostãƒ¢ãƒ‡ãƒ«çµ±åˆãƒ»äºˆæ¸¬å®Ÿè¡Œæº–å‚™

---

## ğŸš€ Phase 10æ¬¡æ®µéšå®Ÿè£…è¨ˆç”»

### **Week 1: ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ çµ±åˆå®Ÿè£…**

#### **å„ªå…ˆåº¦1: æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿å–å¾—è‡ªå‹•åŒ–**
```python
# å®Ÿè£…äºˆå®š: src/pipelines/daily_prediction.py
class DailyPredictionPipeline:
    def get_yesterday_and_prev_month(self):
        # æ˜¨æ—¥ãƒ»å‰æœˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
    
    def download_power_data(self):
        # MainETLPipelineã§2ãƒ¶æœˆå–å¾—
        
    def download_weather_data(self):
        # WeatherProcessorã§åƒè‘‰çœŒãƒ»æ˜¨æ—¥åˆ†å–å¾—
```

#### **å„ªå…ˆåº¦2: å®Ÿè¡Œç¢ºèªãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
- æ—¢å­˜MainETLPipelineã®å‹•ä½œç¢ºèª
- ç’°å¢ƒå¤‰æ•°è¨­å®šã§ã®å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
- 404ã‚¨ãƒ©ãƒ¼ãƒ»APIåˆ¶é™æ™‚ã®å‹•ä½œæ¤œè¨¼

### **Week 2: ç‰¹å¾´é‡ç”Ÿæˆãƒ»äºˆæ¸¬å®Ÿè¡Œçµ±åˆ**

#### **Phase 5-6ç‰¹å¾´é‡ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯çµ±åˆ**
- BigQueryçµ±åˆå‡¦ç†ã®æ´»ç”¨
- 12ç‰¹å¾´é‡ç”Ÿæˆï¼ˆlag_1_business_dayé‡è¦åº¦84.3%æ´»ç”¨ï¼‰
- dropna()æˆ¦ç•¥é©ç”¨ï¼ˆPhase 9ç¢ºå®šï¼‰

#### **Phase 9 XGBoostãƒ¢ãƒ‡ãƒ«çµ±åˆ**
- å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã®èª­ã¿è¾¼ã¿ãƒ»äºˆæ¸¬å®Ÿè¡Œ
- 1é€±é–“ãƒ»1ãƒ¶æœˆäºˆæ¸¬ã®ä¸¡å¯¾å¿œ
- MAPE 2.15%ç²¾åº¦ç¶­æŒç¢ºèª

### **Week 3: çµæœä¿å­˜ãƒ»å¯è¦–åŒ–æº–å‚™**

#### **BigQuery prediction_resultsãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ**
- äºˆæ¸¬çµæœä¿å­˜ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ
- Looker Studioé€£æºæº–å‚™
- å±¥æ­´ç®¡ç†ãƒ»ç²¾åº¦ç›£è¦–è¨­è¨ˆ

#### **è‡ªå‹•å®Ÿè¡Œãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°**
- æ—¥æ¬¡å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œæˆ
- Windowsã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©è¨­å®š
- ãƒ­ã‚°ç›£è¦–ãƒ»ã‚¨ãƒ©ãƒ¼é€šçŸ¥æ©Ÿèƒ½

---

## ğŸ“‹ Phase 10å­¦ç¿’ä¾¡å€¤ãƒ»æˆé•·åŠ¹æœ

### **ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£**
- âœ… **è¨­è¨ˆæ€æƒ³ç†è§£**: ç–çµåˆãƒ»å†åˆ©ç”¨æ€§ãƒ»çµ±åˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä¾¡å€¤
- âœ… **æ—¢å­˜è³‡ç”£æ´»ç”¨**: ãƒ¬ã‚¬ã‚·ãƒ¼æ´»ç”¨ãƒ»æ®µéšçš„æ”¹è‰¯ã®å®Ÿè·µçš„åˆ¤æ–­
- âœ… **ç’°å¢ƒå¯¾å¿œè¨­è¨ˆ**: é–‹ç™ºãƒ»æœ¬ç•ªåˆ†é›¢ãƒ»ãƒãƒ¼ãƒ é–‹ç™ºå¯¾å¿œã®é‡è¦æ€§
- âœ… **åˆ¶ç´„ç†è§£æ´»ç”¨**: APIåˆ¶ç´„ã‚’å‰æã¨ã—ãŸåŠ¹ç‡çš„ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### **å®Ÿè£…æˆ¦ç•¥ãƒ»åˆ¤æ–­åŠ›**
- âœ… **æ–°è¦é–‹ç™ºæœ€å°åŒ–**: æ—¢å­˜è³‡ç”£ç†è§£ã«ã‚ˆã‚‹åŠ¹ç‡çš„é–‹ç™ºåˆ¤æ–­
- âœ… **çµ±åˆè¨­è¨ˆèƒ½åŠ›**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ„ã¿åˆã‚ã›ã«ã‚ˆã‚‹ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰
- âœ… **å®Ÿç”¨æ€§é‡è¦–**: å®Œç’§æ€§ã‚ˆã‚Šå®Ÿè£…ãƒ»é‹ç”¨ã®ç°¡å˜ã•é‡è¦–åˆ¤æ–­
- âœ… **æ®µéšçš„å®Ÿè£…**: Weekå˜ä½ã®å®Ÿè£…è¨ˆç”»ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†

### **æŠ€è¡“ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç´ é¤Š**
- âœ… **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©•ä¾¡**: æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆå“è³ªãƒ»æ”¹è‰¯å¯èƒ½æ€§è©•ä¾¡
- âœ… **æŠ€è¡“é¸æŠåˆ¤æ–­**: æ–°æŠ€è¡“å°å…¥vsæ—¢å­˜æ´»ç”¨ã®åˆç†çš„åˆ¤æ–­
- âœ… **ãƒãƒ¼ãƒ é–‹ç™ºæº–å‚™**: ç’°å¢ƒçµ±ä¸€ãƒ»ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ä¿å®ˆæ€§é‡è¦–
- âœ… **ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤é‡è¦–**: æŠ€è¡“çš„å®Œç’§æ€§ã‚ˆã‚Šãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤å‰µå‡ºé‡è¦–

---

## ğŸ‰ Phase 10æº–å‚™å®Œäº†ãƒ»å®Ÿè£…é–‹å§‹æº–å‚™

### **åŸºç›¤ç†è§£å®Œäº†ç¢ºèª**
- âœ… **æ—¢å­˜å®Ÿè£…ç†è§£**: Phase 1-9ã®å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ãƒ»æ©Ÿèƒ½æŠŠæ¡
- âœ… **çµ±åˆè¨­è¨ˆç†è§£**: MainETLPipelineã®çµ±åˆä¾¡å€¤ãƒ»æ´»ç”¨æ–¹æ³•ç†è§£
- âœ… **ç’°å¢ƒå¯¾å¿œå®Œäº†**: ENERGY_ENV_PATHè¨­å®šãƒ»ã‚³ãƒ¼ãƒ‰ä¿®æ­£å®Œäº†
- âœ… **å®Ÿè£…æˆ¦ç•¥ç¢ºå®š**: æ—¢å­˜æ´»ç”¨æœ€å¤§åŒ–ãƒ»æ–°è¦é–‹ç™ºæœ€å°åŒ–æ–¹é‡æ±ºå®š

### **å®Ÿè£…æº–å‚™å®Œäº†çŠ¶æ³**
- ğŸ¯ **é–‹ç™ºç’°å¢ƒ**: Windows + VS Code + venv + ç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº†
- ğŸ¯ **æ—¢å­˜è³‡ç”£**: PowerDataDownloader + WeatherProcessor + MainETLPipelineæ´»ç”¨æº–å‚™å®Œäº†
- ğŸ¯ **çµ±åˆè¨­è¨ˆ**: DailyPredictionPipelineè¨­è¨ˆãƒ»å®Ÿè£…æ–¹é‡ç¢ºå®š
- ğŸ¯ **Phase 9é€£æº**: XGBoostãƒ¢ãƒ‡ãƒ«çµ±åˆãƒ»äºˆæ¸¬å®Ÿè¡Œæº–å‚™å®Œäº†

**ğŸš€ Phase 10æº–å‚™æ®µéšã«ã‚ˆã‚Šã€Phase 1-9ã®å„ªç§€ãªæ—¢å­˜è³‡ç”£ã‚’æœ€å¤§é™æ´»ç”¨ã—ãŸåŠ¹ç‡çš„ãªã‚·ã‚¹ãƒ†ãƒ çµ±åˆè¨­è¨ˆãŒç¢ºå®šã€‚æ–°è¦é–‹ç™ºã‚’æœ€å°åŒ–ã—ã€å®Ÿè¨¼æ¸ˆã¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚‹å®‰å®šæ€§ãƒ»ä¿å®ˆæ€§ã‚’é‡è¦–ã—ãŸå®Ÿè£…æˆ¦ç•¥ã§ã€æ—¥æ¬¡è‡ªå‹•äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ ã®ç¢ºå®Ÿãªå®Œæˆã¸ã®æº–å‚™ãŒå®Œäº†ï¼**

**ğŸ’¡ æ—¢å­˜å®Ÿè£…ã®è¨­è¨ˆæ€æƒ³ç†è§£ãƒ»ç’°å¢ƒå¯¾å¿œãƒ»çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã«ã‚ˆã‚Šã€å˜ãªã‚‹æ©Ÿèƒ½è¿½åŠ ã§ãªãã€Œã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ä¾¡å€¤å‘ä¸Šãƒ»é‹ç”¨æ€§å‘ä¸Šãƒ»æ‹¡å¼µæ€§ç¢ºä¿ã€ã‚’å®Ÿç¾ã™ã‚‹æŠ€è¡“ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç´ é¤Šã‚‚åŒæ™‚ã«ç¢ºç«‹ï¼**